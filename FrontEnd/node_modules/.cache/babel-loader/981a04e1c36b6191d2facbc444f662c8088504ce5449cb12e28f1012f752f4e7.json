{"ast":null,"code":"import { initializeApp } from 'firebase/app';\nimport { getMessaging, getToken as getFirebaseToken, onMessage } from 'firebase/messaging';\nimport { firebaseConfig } from './firebaseConfig';\n\n// Initialize Firebase app\nconst app = initializeApp(firebaseConfig);\nconst messaging = getMessaging(app);\nexport const setupNotifications = callback => {\n  onMessage(messaging, payload => {\n    console.log('Message received. ', payload); // Debugging line\n    callback(payload);\n  });\n};\nexport const getToken = async () => {\n  try {\n    const currentToken = localStorage.getItem('fcmToken');\n    if (currentToken) {\n      console.log('FCM Token from localStorage:', currentToken);\n      return currentToken;\n    } else {\n      const permission = await Notification.requestPermission();\n      if (permission === 'granted') {\n        console.log('Notification permission granted.');\n        const token = await getFirebaseToken(messaging, {\n          vapidKey: 'BF9Q0ytyvFzr7aZRCqwNQRhYGhTkO9NFZyQDU_FUNQ5rV0jcZ0_hYjjB9yd5CGzFGQrPDLEDSX03K8_FR1d3v6g'\n        });\n        if (token) {\n          console.log('FCM Token:', token);\n          localStorage.setItem('fcmToken', token);\n          return token;\n        } else {\n          console.log('Failed to get FCM token.');\n          return null;\n        }\n      } else {\n        console.log('Notification permission not granted.');\n        return null;\n      }\n    }\n  } catch (error) {\n    console.error('Error getting FCM token:', error);\n    return null;\n  }\n};\nexport const checkNotificationPermission = async () => {\n  if (Notification.permission === 'default') {\n    const permission = await Notification.requestPermission();\n    return permission === 'granted';\n  }\n  return Notification.permission === 'granted';\n};","map":{"version":3,"names":["initializeApp","getMessaging","getToken","getFirebaseToken","onMessage","firebaseConfig","app","messaging","setupNotifications","callback","payload","console","log","currentToken","localStorage","getItem","permission","Notification","requestPermission","token","vapidKey","setItem","error","checkNotificationPermission"],"sources":["/home/rguktrkvalley/rgukt-event-management/src/firebase.js"],"sourcesContent":["import { initializeApp } from 'firebase/app';\nimport { getMessaging, getToken as getFirebaseToken, onMessage } from 'firebase/messaging';\nimport { firebaseConfig } from './firebaseConfig';\n\n// Initialize Firebase app\nconst app = initializeApp(firebaseConfig);\nconst messaging = getMessaging(app);\n\nexport const setupNotifications = (callback) => {\n  onMessage(messaging, (payload) => {\n    console.log('Message received. ', payload); // Debugging line\n    callback(payload);\n  });\n};\n\nexport const getToken = async () => {\n  try {\n    const currentToken = localStorage.getItem('fcmToken');\n    if (currentToken) {\n      console.log('FCM Token from localStorage:', currentToken);\n      return currentToken;\n    } else {\n      const permission = await Notification.requestPermission();\n      if (permission === 'granted') {\n        console.log('Notification permission granted.');\n\n        const token = await getFirebaseToken(messaging, { vapidKey: 'BF9Q0ytyvFzr7aZRCqwNQRhYGhTkO9NFZyQDU_FUNQ5rV0jcZ0_hYjjB9yd5CGzFGQrPDLEDSX03K8_FR1d3v6g' });\n        if (token) {\n          console.log('FCM Token:', token);\n          localStorage.setItem('fcmToken', token);\n          return token;\n        } else {\n          console.log('Failed to get FCM token.');\n          return null;\n        }\n      } else {\n        console.log('Notification permission not granted.');\n        return null;\n      }\n    }\n  } catch (error) {\n    console.error('Error getting FCM token:', error);\n    return null;\n  }\n};\nexport const checkNotificationPermission = async () => {\n    if (Notification.permission === 'default') {\n      const permission = await Notification.requestPermission();\n      return permission === 'granted';\n    }\n    return Notification.permission === 'granted';\n  };\n  \n"],"mappings":"AAAA,SAASA,aAAa,QAAQ,cAAc;AAC5C,SAASC,YAAY,EAAEC,QAAQ,IAAIC,gBAAgB,EAAEC,SAAS,QAAQ,oBAAoB;AAC1F,SAASC,cAAc,QAAQ,kBAAkB;;AAEjD;AACA,MAAMC,GAAG,GAAGN,aAAa,CAACK,cAAc,CAAC;AACzC,MAAME,SAAS,GAAGN,YAAY,CAACK,GAAG,CAAC;AAEnC,OAAO,MAAME,kBAAkB,GAAIC,QAAQ,IAAK;EAC9CL,SAAS,CAACG,SAAS,EAAGG,OAAO,IAAK;IAChCC,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEF,OAAO,CAAC,CAAC,CAAC;IAC5CD,QAAQ,CAACC,OAAO,CAAC;EACnB,CAAC,CAAC;AACJ,CAAC;AAED,OAAO,MAAMR,QAAQ,GAAG,MAAAA,CAAA,KAAY;EAClC,IAAI;IACF,MAAMW,YAAY,GAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;IACrD,IAAIF,YAAY,EAAE;MAChBF,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEC,YAAY,CAAC;MACzD,OAAOA,YAAY;IACrB,CAAC,MAAM;MACL,MAAMG,UAAU,GAAG,MAAMC,YAAY,CAACC,iBAAiB,CAAC,CAAC;MACzD,IAAIF,UAAU,KAAK,SAAS,EAAE;QAC5BL,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAC;QAE/C,MAAMO,KAAK,GAAG,MAAMhB,gBAAgB,CAACI,SAAS,EAAE;UAAEa,QAAQ,EAAE;QAA0F,CAAC,CAAC;QACxJ,IAAID,KAAK,EAAE;UACTR,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEO,KAAK,CAAC;UAChCL,YAAY,CAACO,OAAO,CAAC,UAAU,EAAEF,KAAK,CAAC;UACvC,OAAOA,KAAK;QACd,CAAC,MAAM;UACLR,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;UACvC,OAAO,IAAI;QACb;MACF,CAAC,MAAM;QACLD,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC;QACnD,OAAO,IAAI;MACb;IACF;EACF,CAAC,CAAC,OAAOU,KAAK,EAAE;IACdX,OAAO,CAACW,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;IAChD,OAAO,IAAI;EACb;AACF,CAAC;AACD,OAAO,MAAMC,2BAA2B,GAAG,MAAAA,CAAA,KAAY;EACnD,IAAIN,YAAY,CAACD,UAAU,KAAK,SAAS,EAAE;IACzC,MAAMA,UAAU,GAAG,MAAMC,YAAY,CAACC,iBAAiB,CAAC,CAAC;IACzD,OAAOF,UAAU,KAAK,SAAS;EACjC;EACA,OAAOC,YAAY,CAACD,UAAU,KAAK,SAAS;AAC9C,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}