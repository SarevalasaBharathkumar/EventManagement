{"ast":null,"code":"var _jsxFileName = \"/home/rguktrkvalley/rgukt-event-management/src/components/EventPromotion.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EventPromotion = ({\n  userType\n}) => {\n  _s();\n  const [eventName, setEventName] = useState(\"\");\n  const [images, setImages] = useState([]);\n  const [selectedImages, setSelectedImages] = useState([]);\n  useEffect(() => {\n    // Fetch existing images from the server\n    axios.get(\"/api/events/images\").then(response => setImages(response.data)).catch(error => console.error(\"Error fetching images\", error));\n  }, []);\n  const handleFileChange = e => {\n    setSelectedImages([...e.target.files]);\n  };\n  const handleUpload = () => {\n    const formData = new FormData();\n    formData.append(\"eventName\", eventName);\n    for (const image of selectedImages) {\n      formData.append(\"images\", image);\n    }\n    axios.post(\"/api/events/upload\", formData).then(response => {\n      setImages(response.data); // Assuming the response includes the updated image list\n      setEventName(\"\");\n      setSelectedImages([]);\n    }).catch(error => console.error(\"Error uploading images\", error));\n  };\n  const handleDelete = imageId => {\n    axios.delete(`/api/events/images/${imageId}`).then(response => {\n      setImages(images.filter(image => image._id !== imageId));\n    }).catch(error => console.error(\"Error deleting image\", error));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [userType === 'admin' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"upload-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Event Name\",\n        value: eventName,\n        onChange: e => setEventName(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        multiple: true,\n        onChange: handleFileChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleUpload,\n        disabled: !eventName || selectedImages.length === 0,\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"image-gallery\",\n      children: images.map(image => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"image-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: image.url,\n          alt: image.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 25\n        }, this), userType === 'admin' ? /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDelete(image._id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"instagram-button\",\n          onClick: () => window.open(`https://www.instagram.com/create/story/?media=${encodeURIComponent(image.url)}`, '_blank'),\n          children: \"Share on Instagram\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 29\n        }, this)]\n      }, image._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 9\n  }, this);\n};\n_s(EventPromotion, \"9fBwpjJAE2NwbtTlg54Cqn+mB5c=\");\n_c = EventPromotion;\nexport default EventPromotion;\nvar _c;\n$RefreshReg$(_c, \"EventPromotion\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","EventPromotion","userType","_s","eventName","setEventName","images","setImages","selectedImages","setSelectedImages","get","then","response","data","catch","error","console","handleFileChange","e","target","files","handleUpload","formData","FormData","append","image","post","handleDelete","imageId","delete","filter","_id","className","children","type","placeholder","value","onChange","fileName","_jsxFileName","lineNumber","columnNumber","multiple","onClick","disabled","length","map","src","url","alt","name","window","open","encodeURIComponent","_c","$RefreshReg$"],"sources":["/home/rguktrkvalley/rgukt-event-management/src/components/EventPromotion.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nconst EventPromotion = ({ userType }) => {\n    const [eventName, setEventName] = useState(\"\");\n    const [images, setImages] = useState([]);\n    const [selectedImages, setSelectedImages] = useState([]);\n\n    useEffect(() => {\n        // Fetch existing images from the server\n        axios.get(\"/api/events/images\")\n            .then(response => setImages(response.data))\n            .catch(error => console.error(\"Error fetching images\", error));\n    }, []);\n\n    const handleFileChange = (e) => {\n        setSelectedImages([...e.target.files]);\n    };\n\n    const handleUpload = () => {\n        const formData = new FormData();\n        formData.append(\"eventName\", eventName);\n        for (const image of selectedImages) {\n            formData.append(\"images\", image);\n        }\n\n        axios.post(\"/api/events/upload\", formData)\n            .then(response => {\n                setImages(response.data); // Assuming the response includes the updated image list\n                setEventName(\"\");\n                setSelectedImages([]);\n            })\n            .catch(error => console.error(\"Error uploading images\", error));\n    };\n\n    const handleDelete = (imageId) => {\n        axios.delete(`/api/events/images/${imageId}`)\n            .then(response => {\n                setImages(images.filter(image => image._id !== imageId));\n            })\n            .catch(error => console.error(\"Error deleting image\", error));\n    };\n\n    return (\n        <div className=\"container\">\n            {userType === 'admin' && (\n                <div className=\"upload-section\">\n                    <input\n                        type=\"text\"\n                        placeholder=\"Event Name\"\n                        value={eventName}\n                        onChange={(e) => setEventName(e.target.value)}\n                    />\n                    <input\n                        type=\"file\"\n                        multiple\n                        onChange={handleFileChange}\n                    />\n                    <button\n                        onClick={handleUpload}\n                        disabled={!eventName || selectedImages.length === 0}\n                    >\n                        Upload\n                    </button>\n                </div>\n            )}\n            <div className=\"image-gallery\">\n                {images.map(image => (\n                    <div key={image._id} className=\"image-card\">\n                        <img src={image.url} alt={image.name} />\n                        {userType === 'admin' ? (\n                            <button onClick={() => handleDelete(image._id)}>\n                                Delete\n                            </button>\n                        ) : (\n                            <button\n                                className=\"instagram-button\"\n                                onClick={() => window.open(`https://www.instagram.com/create/story/?media=${encodeURIComponent(image.url)}`, '_blank')}\n                            >\n                                Share on Instagram\n                            </button>\n                        )}\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\nexport default EventPromotion;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}