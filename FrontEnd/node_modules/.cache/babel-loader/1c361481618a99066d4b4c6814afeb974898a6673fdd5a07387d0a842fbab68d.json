{"ast":null,"code":"import { initializeApp } from 'firebase/app';\nimport { getMessaging, getToken as getFirebaseToken, onMessage } from 'firebase/messaging';\nimport { firebaseConfig } from './firebaseConfig';\n\n// Initialize Firebase app\nconst app = initializeApp(firebaseConfig);\nconst messaging = getMessaging(app);\nexport const setupNotifications = callback => {\n  onMessage(messaging, payload => {\n    console.log('Message received. ', payload); // Debugging line\n    callback(payload);\n  });\n};\nexport const getToken = async () => {\n  try {\n    // Wait for the service worker to be fully registered and ready\n    await navigator.serviceWorker.ready;\n\n    // Get the service worker registration\n    const registration = await navigator.serviceWorker.getRegistration();\n    if (!registration) {\n      throw new Error('Service worker registration not found.');\n    }\n\n    // Get FCM token\n    const token = await getFirebaseToken(messaging, {\n      vapidKey: 'BF9Q0ytyvFzr7aZRCqwNQRhYGhTkO9NFZyQDU_FUNQ5rV0jcZ0_hYjjB9yd5CGzFGQrPDLEDSX03K8_FR1d3v6g',\n      serviceWorkerRegistration: registration\n    });\n    if (token) {\n      console.log('FCM Token:', token);\n      // Optionally store the token if needed\n      localStorage.setItem('fcmToken', token);\n      return token;\n    } else {\n      console.log('No registration token available.');\n      return null;\n    }\n  } catch (error) {\n    console.error('Error getting FCM token:', error);\n    return null;\n  }\n};\nexport const checkNotificationPermission = async () => {\n  if (Notification.permission === 'default') {\n    const permission = await Notification.requestPermission();\n    return permission === 'granted';\n  }\n  return Notification.permission === 'granted';\n};","map":{"version":3,"names":["initializeApp","getMessaging","getToken","getFirebaseToken","onMessage","firebaseConfig","app","messaging","setupNotifications","callback","payload","console","log","navigator","serviceWorker","ready","registration","getRegistration","Error","token","vapidKey","serviceWorkerRegistration","localStorage","setItem","error","checkNotificationPermission","Notification","permission","requestPermission"],"sources":["/home/rguktrkvalley/rgukt-event-management/src/firebase.js"],"sourcesContent":["import { initializeApp } from 'firebase/app';\nimport { getMessaging, getToken as getFirebaseToken, onMessage } from 'firebase/messaging';\nimport { firebaseConfig } from './firebaseConfig';\n\n// Initialize Firebase app\nconst app = initializeApp(firebaseConfig);\nconst messaging = getMessaging(app);\n\nexport const setupNotifications = (callback) => {\n  onMessage(messaging, (payload) => {\n    console.log('Message received. ', payload); // Debugging line\n    callback(payload);\n  });\n};\n\nexport const getToken = async () => {\n  try {\n    // Wait for the service worker to be fully registered and ready\n    await navigator.serviceWorker.ready;\n\n    // Get the service worker registration\n    const registration = await navigator.serviceWorker.getRegistration();\n\n    if (!registration) {\n      throw new Error('Service worker registration not found.');\n    }\n\n    // Get FCM token\n    const token = await getFirebaseToken(messaging, {\n      vapidKey: 'BF9Q0ytyvFzr7aZRCqwNQRhYGhTkO9NFZyQDU_FUNQ5rV0jcZ0_hYjjB9yd5CGzFGQrPDLEDSX03K8_FR1d3v6g',\n      serviceWorkerRegistration: registration,\n    });\n\n    if (token) {\n      console.log('FCM Token:', token);\n      // Optionally store the token if needed\n      localStorage.setItem('fcmToken', token);\n      return token;\n    } else {\n      console.log('No registration token available.');\n      return null;\n    }\n  } catch (error) {\n    console.error('Error getting FCM token:', error);\n    return null;\n  }\n};\n\nexport const checkNotificationPermission = async () => {\n  if (Notification.permission === 'default') {\n    const permission = await Notification.requestPermission();\n    return permission === 'granted';\n  }\n  return Notification.permission === 'granted';\n};\n"],"mappings":"AAAA,SAASA,aAAa,QAAQ,cAAc;AAC5C,SAASC,YAAY,EAAEC,QAAQ,IAAIC,gBAAgB,EAAEC,SAAS,QAAQ,oBAAoB;AAC1F,SAASC,cAAc,QAAQ,kBAAkB;;AAEjD;AACA,MAAMC,GAAG,GAAGN,aAAa,CAACK,cAAc,CAAC;AACzC,MAAME,SAAS,GAAGN,YAAY,CAACK,GAAG,CAAC;AAEnC,OAAO,MAAME,kBAAkB,GAAIC,QAAQ,IAAK;EAC9CL,SAAS,CAACG,SAAS,EAAGG,OAAO,IAAK;IAChCC,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEF,OAAO,CAAC,CAAC,CAAC;IAC5CD,QAAQ,CAACC,OAAO,CAAC;EACnB,CAAC,CAAC;AACJ,CAAC;AAED,OAAO,MAAMR,QAAQ,GAAG,MAAAA,CAAA,KAAY;EAClC,IAAI;IACF;IACA,MAAMW,SAAS,CAACC,aAAa,CAACC,KAAK;;IAEnC;IACA,MAAMC,YAAY,GAAG,MAAMH,SAAS,CAACC,aAAa,CAACG,eAAe,CAAC,CAAC;IAEpE,IAAI,CAACD,YAAY,EAAE;MACjB,MAAM,IAAIE,KAAK,CAAC,wCAAwC,CAAC;IAC3D;;IAEA;IACA,MAAMC,KAAK,GAAG,MAAMhB,gBAAgB,CAACI,SAAS,EAAE;MAC9Ca,QAAQ,EAAE,yFAAyF;MACnGC,yBAAyB,EAAEL;IAC7B,CAAC,CAAC;IAEF,IAAIG,KAAK,EAAE;MACTR,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEO,KAAK,CAAC;MAChC;MACAG,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEJ,KAAK,CAAC;MACvC,OAAOA,KAAK;IACd,CAAC,MAAM;MACLR,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAC;MAC/C,OAAO,IAAI;IACb;EACF,CAAC,CAAC,OAAOY,KAAK,EAAE;IACdb,OAAO,CAACa,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;IAChD,OAAO,IAAI;EACb;AACF,CAAC;AAED,OAAO,MAAMC,2BAA2B,GAAG,MAAAA,CAAA,KAAY;EACrD,IAAIC,YAAY,CAACC,UAAU,KAAK,SAAS,EAAE;IACzC,MAAMA,UAAU,GAAG,MAAMD,YAAY,CAACE,iBAAiB,CAAC,CAAC;IACzD,OAAOD,UAAU,KAAK,SAAS;EACjC;EACA,OAAOD,YAAY,CAACC,UAAU,KAAK,SAAS;AAC9C,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}