{"ast":null,"code":"import { initializeApp } from 'firebase/app';\nimport { getMessaging, getToken as getFirebaseToken, onMessage } from 'firebase/messaging';\n\n// Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBB4VCDW8XtHsMs-Smh3CyhQC4GBeNqUOw\",\n  authDomain: \"event-management-8c4d4.firebaseapp.com\",\n  projectId: \"event-management-8c4d4\",\n  storageBucket: \"event-management-8c4d4.appspot.com\",\n  messagingSenderId: \"763831488241\",\n  appId: \"1:763831488241:web:393a46c889d7910f6aa350\",\n  measurementId: \"G-L5RD59TYLT\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst messaging = getMessaging(app);\nexport const setupNotifications = callback => {\n  onMessage(messaging, payload => {\n    console.log('Message received. ', payload); // Debugging line\n    callback(payload);\n  });\n};\nexport const getToken = async () => {\n  try {\n    const currentToken = localStorage.getItem('fcmToken');\n    if (currentToken) {\n      console.log('FCM Token from localStorage:', currentToken);\n      return currentToken;\n    } else {\n      const permission = await Notification.requestPermission();\n      if (permission === 'granted') {\n        console.log('Notification permission granted.');\n        const token = await getFirebaseToken(messaging, {\n          vapidKey: 'BF9Q0ytyvFzr7aZRCqwNQRhYGhTkO9NFZyQDU_FUNQ5rV0jcZ0_hYjjB9yd5CGzFGQrPDLEDSX03K8_FR1d3v6g'\n        });\n        if (token) {\n          console.log('FCM Token:', token);\n          localStorage.setItem('fcmToken', token);\n          return token;\n        } else {\n          console.log('Failed to get FCM token.');\n          return null;\n        }\n      } else {\n        console.log('Notification permission not granted.');\n        return null;\n      }\n    }\n  } catch (error) {\n    console.error('Error getting FCM token:', error);\n    return null;\n  }\n};\nexport const checkNotificationPermission = async () => {\n  if (Notification.permission === 'default') {\n    const permission = await Notification.requestPermission();\n    return permission === 'granted';\n  }\n  return Notification.permission === 'granted';\n};","map":{"version":3,"names":["initializeApp","getMessaging","getToken","getFirebaseToken","onMessage","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","messaging","setupNotifications","callback","payload","console","log","currentToken","localStorage","getItem","permission","Notification","requestPermission","token","vapidKey","setItem","error","checkNotificationPermission"],"sources":["/home/rguktrkvalley/rgukt-event-management/src/firebase.js"],"sourcesContent":["import { initializeApp } from 'firebase/app';\nimport { getMessaging, getToken as getFirebaseToken, onMessage } from 'firebase/messaging';\n\n// Firebase configuration\nconst firebaseConfig = {\n    apiKey: \"AIzaSyBB4VCDW8XtHsMs-Smh3CyhQC4GBeNqUOw\",\n    authDomain: \"event-management-8c4d4.firebaseapp.com\",\n    projectId: \"event-management-8c4d4\",\n    storageBucket: \"event-management-8c4d4.appspot.com\",\n    messagingSenderId: \"763831488241\",\n    appId: \"1:763831488241:web:393a46c889d7910f6aa350\",\n    measurementId: \"G-L5RD59TYLT\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst messaging = getMessaging(app);\n\nexport const setupNotifications = (callback) => {\n    onMessage(messaging, (payload) => {\n        console.log('Message received. ', payload); // Debugging line\n        callback(payload);\n    });\n};\n\nexport const getToken = async () => {\n    try {\n        const currentToken = localStorage.getItem('fcmToken');\n        if (currentToken) {\n            console.log('FCM Token from localStorage:', currentToken);\n            return currentToken;\n        } else {\n            const permission = await Notification.requestPermission();\n            if (permission === 'granted') {\n                console.log('Notification permission granted.');\n\n                const token = await getFirebaseToken(messaging, { vapidKey: 'BF9Q0ytyvFzr7aZRCqwNQRhYGhTkO9NFZyQDU_FUNQ5rV0jcZ0_hYjjB9yd5CGzFGQrPDLEDSX03K8_FR1d3v6g' });\n                if (token) {\n                    console.log('FCM Token:', token);\n                    localStorage.setItem('fcmToken', token);\n                    return token;\n                } else {\n                    console.log('Failed to get FCM token.');\n                    return null;\n                }\n            } else {\n                console.log('Notification permission not granted.');\n                return null;\n            }\n        }\n    } catch (error) {\n        console.error('Error getting FCM token:', error);\n        return null;\n    }\n};\n\nexport const checkNotificationPermission = async () => {\n    if (Notification.permission === 'default') {\n        const permission = await Notification.requestPermission();\n        return permission === 'granted';\n    }\n    return Notification.permission === 'granted';\n};\n"],"mappings":"AAAA,SAASA,aAAa,QAAQ,cAAc;AAC5C,SAASC,YAAY,EAAEC,QAAQ,IAAIC,gBAAgB,EAAEC,SAAS,QAAQ,oBAAoB;;AAE1F;AACA,MAAMC,cAAc,GAAG;EACnBC,MAAM,EAAE,yCAAyC;EACjDC,UAAU,EAAE,wCAAwC;EACpDC,SAAS,EAAE,wBAAwB;EACnCC,aAAa,EAAE,oCAAoC;EACnDC,iBAAiB,EAAE,cAAc;EACjCC,KAAK,EAAE,2CAA2C;EAClDC,aAAa,EAAE;AACnB,CAAC;;AAED;AACA,MAAMC,GAAG,GAAGb,aAAa,CAACK,cAAc,CAAC;AACzC,MAAMS,SAAS,GAAGb,YAAY,CAACY,GAAG,CAAC;AAEnC,OAAO,MAAME,kBAAkB,GAAIC,QAAQ,IAAK;EAC5CZ,SAAS,CAACU,SAAS,EAAGG,OAAO,IAAK;IAC9BC,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEF,OAAO,CAAC,CAAC,CAAC;IAC5CD,QAAQ,CAACC,OAAO,CAAC;EACrB,CAAC,CAAC;AACN,CAAC;AAED,OAAO,MAAMf,QAAQ,GAAG,MAAAA,CAAA,KAAY;EAChC,IAAI;IACA,MAAMkB,YAAY,GAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;IACrD,IAAIF,YAAY,EAAE;MACdF,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEC,YAAY,CAAC;MACzD,OAAOA,YAAY;IACvB,CAAC,MAAM;MACH,MAAMG,UAAU,GAAG,MAAMC,YAAY,CAACC,iBAAiB,CAAC,CAAC;MACzD,IAAIF,UAAU,KAAK,SAAS,EAAE;QAC1BL,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAC;QAE/C,MAAMO,KAAK,GAAG,MAAMvB,gBAAgB,CAACW,SAAS,EAAE;UAAEa,QAAQ,EAAE;QAA0F,CAAC,CAAC;QACxJ,IAAID,KAAK,EAAE;UACPR,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEO,KAAK,CAAC;UAChCL,YAAY,CAACO,OAAO,CAAC,UAAU,EAAEF,KAAK,CAAC;UACvC,OAAOA,KAAK;QAChB,CAAC,MAAM;UACHR,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;UACvC,OAAO,IAAI;QACf;MACJ,CAAC,MAAM;QACHD,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC;QACnD,OAAO,IAAI;MACf;IACJ;EACJ,CAAC,CAAC,OAAOU,KAAK,EAAE;IACZX,OAAO,CAACW,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;IAChD,OAAO,IAAI;EACf;AACJ,CAAC;AAED,OAAO,MAAMC,2BAA2B,GAAG,MAAAA,CAAA,KAAY;EACnD,IAAIN,YAAY,CAACD,UAAU,KAAK,SAAS,EAAE;IACvC,MAAMA,UAAU,GAAG,MAAMC,YAAY,CAACC,iBAAiB,CAAC,CAAC;IACzD,OAAOF,UAAU,KAAK,SAAS;EACnC;EACA,OAAOC,YAAY,CAACD,UAAU,KAAK,SAAS;AAChD,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}